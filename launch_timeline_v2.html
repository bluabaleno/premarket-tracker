<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Launch Timeline v2 - Polymarket</title>
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: #1a1a24;
            --text-primary: #ffffff;
            --text-secondary: #8b8b9e;
            --accent: #6366f1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 40px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
        }

        h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #6366f1, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1em;
        }

        .data-source {
            margin-top: 8px;
            font-size: 0.85em;
            color: var(--text-secondary);
            opacity: 0.7;
        }

        .visualization-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .viz-title {
            font-size: 1.4em;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .viz-description {
            color: var(--text-secondary);
            margin-bottom: 25px;
            font-size: 0.95em;
        }

        /* Timeline container */
        .timeline {
            position: relative;
        }

        /* Month axis */
        .month-axis {
            display: flex;
            margin-bottom: 20px;
            padding-left: 160px;
            position: relative;
        }

        .month-col {
            flex: 1;
            text-align: center;
            position: relative;
        }

        .month-label {
            font-size: 0.7em;
            color: var(--text-secondary);
            padding: 6px 0;
        }

        .month-label.current {
            color: #22c55e;
            font-weight: bold;
        }

        .year-label {
            font-size: 0.65em;
            color: var(--text-secondary);
            opacity: 0.6;
        }

        /* Now line */
        .now-line {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, #22c55e, transparent);
            z-index: 10;
        }

        /* Project row */
        .project-row {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
            height: 32px;
        }

        .project-name {
            width: 160px;
            font-size: 0.85em;
            padding-right: 15px;
            text-align: right;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex-shrink: 0;
        }

        .project-track {
            flex: 1;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
        }

        /* Combined bar with gradient segments */
        .launch-bar {
            position: absolute;
            height: 22px;
            border-radius: 4px;
            display: flex;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.15s, box-shadow 0.15s;
        }

        .launch-bar:hover {
            transform: scaleY(1.2);
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.4);
        }

        .bar-segment {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.65em;
            font-weight: 500;
            color: white;
            position: relative;
        }

        .bar-segment span {
            opacity: 0;
            transition: opacity 0.15s;
        }

        .launch-bar:hover .bar-segment span {
            opacity: 1;
        }

        /* 50% marker */
        .fifty-marker {
            position: absolute;
            width: 3px;
            height: 28px;
            background: white;
            border-radius: 2px;
            transform: translateX(-50%);
            z-index: 5;
            box-shadow: 0 0 6px rgba(255, 255, 255, 0.5);
        }

        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .legend-color {
            width: 20px;
            height: 14px;
            border-radius: 3px;
        }

        /* Tooltip */
        .tooltip {
            position: fixed;
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 0.85em;
            pointer-events: none;
            z-index: 1000;
            display: none;
            max-width: 300px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
        }

        .tooltip.visible {
            display: block;
        }

        .tooltip-title {
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--accent);
        }

        .tooltip-row {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin: 3px 0;
        }

        .tooltip-label {
            color: var(--text-secondary);
        }

        .tooltip-value {
            font-weight: 500;
        }

        /* Grid lines */
        .grid-lines {
            position: absolute;
            top: 0;
            left: 160px;
            right: 0;
            bottom: 0;
            display: flex;
            pointer-events: none;
        }

        .grid-line {
            flex: 1;
            border-left: 1px solid rgba(255, 255, 255, 0.03);
        }

        .grid-line.quarter {
            border-left-color: rgba(255, 255, 255, 0.08);
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>ðŸš€ Project Launch Timeline</h1>
            <p class="subtitle">Token launch predictions based on Polymarket odds</p>
            <p class="data-source">Data from snapshot 2025-12-30</p>
        </header>

        <section class="visualization-section">
            <h2 class="viz-title">Launch Window Visualization</h2>
            <p class="viz-description">
                Each bar shows the expected launch window. Bar spans from first data point to 90%+ probability.
                Color intensity reflects the cumulative probability at each point. White marker = 50% threshold.
            </p>
            <div id="combined-viz" class="timeline"></div>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(99, 102, 241, 0.15)"></div>
                    <span>
                        < 20%</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(99, 102, 241, 0.35)"></div>
                    <span>20-40%</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(99, 102, 241, 0.55)"></div>
                    <span>40-60%</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(99, 102, 241, 0.75)"></div>
                    <span>60-80%</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(99, 102, 241, 0.95)"></div>
                    <span>80%+</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: white; width: 4px;"></div>
                    <span>50% threshold</span>
                </div>
            </div>
        </section>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        // REAL DATA extracted from snapshot_2025-12-30.json
        // Each project has milestones with DATE and cumulative PROBABILITY
        const timelineData = {
            "Fogo": {
                milestones: [
                    { date: "2025-12-31", prob: 0.002 },
                    { date: "2026-03-31", prob: 0.962 },
                    { date: "2026-06-30", prob: 0.967 },
                    { date: "2026-09-30", prob: 0.966 },
                    { date: "2026-12-31", prob: 0.951 }
                ]
            },
            "Infinex": {
                milestones: [
                    { date: "2025-12-31", prob: 0.002 },
                    { date: "2026-03-31", prob: 0.941 },
                    { date: "2026-06-30", prob: 0.953 }
                ]
            },
            "Solstice": {
                milestones: [
                    { date: "2025-12-31", prob: 0.005 },
                    { date: "2026-03-31", prob: 0.893 },
                    { date: "2026-06-30", prob: 0.956 },
                    { date: "2026-09-30", prob: 0.972 },
                    { date: "2026-12-31", prob: 0.971 }
                ]
            },
            "Paradex": {
                milestones: [
                    { date: "2025-12-31", prob: 0.004 },
                    { date: "2026-02-28", prob: 0.605 },
                    { date: "2026-03-31", prob: 0.864 },
                    { date: "2026-06-30", prob: 0.958 },
                    { date: "2026-09-30", prob: 0.939 },
                    { date: "2026-12-31", prob: 0.902 }
                ]
            },
            "Backpack": {
                milestones: [
                    { date: "2025-12-31", prob: 0.001 },
                    { date: "2026-03-31", prob: 0.66 },
                    { date: "2026-12-31", prob: 0.93 }
                ]
            },
            "USD.AI": {
                milestones: [
                    { date: "2025-12-31", prob: 0.003 },
                    { date: "2026-03-31", prob: 0.73 }
                ]
            },
            "Theo": {
                milestones: [
                    { date: "2025-12-31", prob: 0.001 },
                    { date: "2026-03-31", prob: 0.585 },
                    { date: "2026-06-30", prob: 0.82 },
                    { date: "2026-09-30", prob: 0.84 },
                    { date: "2026-12-31", prob: 0.91 }
                ]
            },
            "MegaETH": {
                milestones: [
                    { date: "2025-12-31", prob: 0.002 },
                    { date: "2026-06-30", prob: 0.714 }
                ]
            },
            "MetaMask": {
                milestones: [
                    { date: "2025-12-31", prob: 0.001 },
                    { date: "2026-06-30", prob: 0.58 },
                    { date: "2026-09-30", prob: 0.77 }
                ]
            },
            "ETHGAS": {
                milestones: [
                    { date: "2026-03-31", prob: 0.485 },
                    { date: "2026-06-30", prob: 0.67 },
                    { date: "2026-09-30", prob: 0.74 },
                    { date: "2026-12-31", prob: 0.865 }
                ]
            },
            "Exponent": {
                milestones: [
                    { date: "2026-03-31", prob: 0.13 },
                    { date: "2026-06-30", prob: 0.53 },
                    { date: "2026-09-30", prob: 0.77 },
                    { date: "2026-12-31", prob: 0.725 }
                ]
            },
            "Tempo": {
                milestones: [
                    { date: "2025-12-31", prob: 0.001 },
                    { date: "2026-03-31", prob: 0.087 },
                    { date: "2026-06-30", prob: 0.425 },
                    { date: "2026-09-30", prob: 0.64 },
                    { date: "2026-12-31", prob: 0.76 }
                ]
            },
            "Titan": {
                milestones: [
                    { date: "2026-03-31", prob: 0.11 },
                    { date: "2026-06-30", prob: 0.205 },
                    { date: "2026-09-30", prob: 0.56 },
                    { date: "2026-12-31", prob: 0.705 }
                ]
            },
            "Base": {
                milestones: [
                    { date: "2025-12-31", prob: 0.002 },
                    { date: "2026-06-30", prob: 0.38 },
                    { date: "2026-12-31", prob: 0.705 }
                ]
            },
            "Ostium": {
                milestones: [
                    { date: "2025-12-31", prob: 0.001 },
                    { date: "2026-12-31", prob: 0.66 }
                ]
            },
            "Abstract": {
                milestones: [
                    { date: "2025-12-31", prob: 0.002 },
                    { date: "2026-12-31", prob: 0.615 }
                ]
            },
            "Loopscale": {
                milestones: [
                    { date: "2026-03-31", prob: 0.16 },
                    { date: "2026-06-30", prob: 0.33 },
                    { date: "2026-09-30", prob: 0.405 },
                    { date: "2026-12-31", prob: 0.63 }
                ]
            },
            "Perena": {
                milestones: [
                    { date: "2026-03-31", prob: 0.19 },
                    { date: "2026-06-30", prob: 0.38 },
                    { date: "2026-09-30", prob: 0.575 },
                    { date: "2026-12-31", prob: 0.87 }
                ]
            },
            "Fomo": {
                milestones: [
                    { date: "2025-12-31", prob: 0.003 },
                    { date: "2026-03-31", prob: 0.13 },
                    { date: "2026-06-30", prob: 0.275 },
                    { date: "2026-09-30", prob: 0.355 },
                    { date: "2026-12-31", prob: 0.735 }
                ]
            },
            "Aztec": {
                milestones: [
                    { date: "2025-12-31", prob: 0.002 },
                    { date: "2026-12-31", prob: 0.908 }
                ]
            },
            "Variational": {
                milestones: [
                    { date: "2025-12-31", prob: 0.001 },
                    { date: "2026-12-31", prob: 0.845 }
                ]
            },
            "edgeX": {
                milestones: [
                    { date: "2025-12-31", prob: 0.465 }
                ]
            },
            "StandX": {
                milestones: [
                    { date: "2025-12-31", prob: 0.004 },
                    { date: "2026-03-31", prob: 0.225 }
                ]
            },
            "GMGN": {
                milestones: [
                    { date: "2025-12-31", prob: 0.004 },
                    { date: "2026-03-31", prob: 0.034 },
                    { date: "2026-12-31", prob: 0.335 }
                ]
            }
        };

        // Timeline: Jan 2025 to Dec 2026
        const months = [];
        for (let year = 2025; year <= 2026; year++) {
            for (let m = 1; m <= 12; m++) {
                const lastDay = new Date(year, m, 0).getDate();
                months.push({
                    label: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][m - 1],
                    key: `${year}-${String(m).padStart(2, '0')}-${lastDay}`,
                    year: year,
                    month: m
                });
            }
        }

        const currentMonthIndex = 11; // Dec 2025

        // Interpolate probability for any date
        function getProbForMonth(project, monthKey) {
            const milestones = timelineData[project].milestones;
            const sorted = [...milestones].sort((a, b) => a.date.localeCompare(b.date));

            let before = null, after = null;
            for (const m of sorted) {
                if (m.date <= monthKey) before = m;
                if (m.date > monthKey && !after) after = m;
            }

            if (!before && !after) return 0;
            if (!before) return 0;
            if (!after) return before.prob;

            const d1 = new Date(before.date), d2 = new Date(after.date), dt = new Date(monthKey);
            const total = (d2 - d1) / 86400000;
            const elapsed = (dt - d1) / 86400000;
            return before.prob + (after.prob - before.prob) * (elapsed / total);
        }

        // Find when probability crosses threshold
        function findThreshold(project, threshold) {
            for (let i = 0; i < months.length; i++) {
                if (getProbForMonth(project, months[i].key) >= threshold) return i;
            }
            return -1;
        }

        // Get first milestone month
        function getFirstMilestoneMonth(project) {
            const first = timelineData[project].milestones[0];
            if (!first) return 0;
            for (let i = 0; i < months.length; i++) {
                if (months[i].key >= first.date) return Math.max(0, i - 1);
            }
            return 0;
        }

        // Get last significant milestone
        function getLastMilestoneMonth(project) {
            const ms = timelineData[project].milestones;
            const last = ms[ms.length - 1];
            for (let i = months.length - 1; i >= 0; i--) {
                if (months[i].key <= last.date) return i;
            }
            return months.length - 1;
        }

        // Sort by expected launch (50% threshold)
        function sortProjects() {
            return Object.keys(timelineData).sort((a, b) => {
                const a50 = findThreshold(a, 0.5);
                const b50 = findThreshold(b, 0.5);
                if (a50 === -1 && b50 === -1) return 0;
                if (a50 === -1) return 1;
                if (b50 === -1) return -1;
                return a50 - b50;
            });
        }

        // Tooltip
        const tooltip = document.getElementById('tooltip');

        function showTooltip(e, project) {
            const milestones = timelineData[project].milestones;
            let html = `<div class="tooltip-title">${project}</div>`;

            for (const m of milestones) {
                const date = new Date(m.date);
                const dateStr = date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
                html += `<div class="tooltip-row">
                    <span class="tooltip-label">${dateStr}</span>
                    <span class="tooltip-value">${(m.prob * 100).toFixed(0)}%</span>
                </div>`;
            }

            tooltip.innerHTML = html;
            tooltip.classList.add('visible');
            tooltip.style.left = Math.min(e.clientX + 15, window.innerWidth - 320) + 'px';
            tooltip.style.top = (e.clientY + 15) + 'px';
        }

        function hideTooltip() {
            tooltip.classList.remove('visible');
        }

        // Render combined visualization
        function renderCombined() {
            const container = document.getElementById('combined-viz');
            const sortedProjects = sortProjects();

            // Month axis
            let html = `<div class="month-axis">`;
            for (let i = 0; i < months.length; i++) {
                const m = months[i];
                const isQuarter = m.month % 3 === 0;
                html += `<div class="month-col">
                    <div class="month-label ${i === currentMonthIndex ? 'current' : ''}">${m.label}</div>
                    ${m.month === 1 ? `<div class="year-label">${m.year}</div>` : ''}
                </div>`;
            }
            html += `</div>`;

            // Grid lines
            html += `<div class="grid-lines">`;
            for (let i = 0; i < months.length; i++) {
                const isQuarter = months[i].month % 3 === 0;
                html += `<div class="grid-line ${isQuarter ? 'quarter' : ''}"></div>`;
            }
            html += `</div>`;

            // Now line at current month
            const nowPct = ((currentMonthIndex + 0.5) / months.length) * 100;

            // Project rows
            for (const project of sortedProjects) {
                const startIdx = getFirstMilestoneMonth(project);
                const endIdx = getLastMilestoneMonth(project);
                const p50Idx = findThreshold(project, 0.5);

                const leftPct = (startIdx / months.length) * 100;
                const widthPct = ((endIdx - startIdx + 1) / months.length) * 100;

                // Build gradient stops for the bar
                let gradientStops = [];
                for (let i = startIdx; i <= endIdx; i++) {
                    const prob = getProbForMonth(project, months[i].key);
                    const alpha = 0.15 + prob * 0.8; // Map 0-1 to 0.15-0.95
                    const localPct = ((i - startIdx) / (endIdx - startIdx)) * 100;
                    gradientStops.push(`rgba(99, 102, 241, ${alpha.toFixed(2)}) ${localPct.toFixed(1)}%`);
                }

                const gradient = gradientStops.length > 1
                    ? `linear-gradient(90deg, ${gradientStops.join(', ')})`
                    : `rgba(99, 102, 241, ${0.15 + getProbForMonth(project, months[startIdx].key) * 0.8})`;

                html += `<div class="project-row">
                    <div class="project-name">${project}</div>
                    <div class="project-track">
                        <div class="launch-bar" 
                            style="left: ${leftPct}%; width: ${widthPct}%; background: ${gradient};"
                            data-project="${project}">
                        </div>`;

                // 50% marker
                if (p50Idx !== -1) {
                    const markerPct = ((p50Idx + 0.5) / months.length) * 100;
                    html += `<div class="fifty-marker" style="left: ${markerPct}%"></div>`;
                }

                html += `</div></div>`;
            }

            container.innerHTML = html;

            // Tooltip events
            container.querySelectorAll('.launch-bar').forEach(bar => {
                bar.addEventListener('mouseenter', (e) => showTooltip(e, bar.dataset.project));
                bar.addEventListener('mousemove', (e) => {
                    tooltip.style.left = Math.min(e.clientX + 15, window.innerWidth - 320) + 'px';
                    tooltip.style.top = (e.clientY + 15) + 'px';
                });
                bar.addEventListener('mouseleave', hideTooltip);
            });
        }

        renderCombined();
    </script>
</body>

</html>